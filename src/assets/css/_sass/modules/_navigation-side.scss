// ------------------------------------------------------------
// SIDEBAR MODULE - MOBILE FIRST
// ------------------------------------------------------------

// =============== VARIABLES ===============

$include-sidebar-right: true !default;
$include-sidebar-left: false !default;

//These must be in % values to calculate widths
$sidebar-width: 10% !default;
$sidebar-right-width: 33% !default;
$sidebar-right-width-narrow: 15% !default;
$sidebar-right-width-medium: 25% !default;
$sidebar-left-breakpoint: $d-vp !default;
$sidebar-right-breakpoint: $e-vp !default;

$sidebar-color-background: $base-background-color;//#191919 !default;
$sidebar-color: #CCC !default;

$sidebar-right-color-background: transparentize(#000, 0.09) !default;// transparent !global !default;//#000 !default;
$sidebar-right-color: #999 !default;


// NEW WAY? TODO $navigation-background-color: $navigation-background !global !default;

// =============== LEFT SIDEBAR ===============

@if $include-sidebar-left != false {

  .content {
    min-width: 0;
    margin-left: 0; //mobile first, nav stays on top

    @include media($sidebar-left-breakpoint) {
      min-width: $b-vp; // TODO: change this to more stable variable
      margin-left:  $sidebar-width; // on larger screens, push out content to make way for sidebar
    }
  }

.sidebar-left {
    overflow: hidden;
    margin-top: $navigation-height;
    width: 100%; //mobile first, sidebar spans top of screen
    height: 60%;
    position: static;
    text-align: center;
    padding: 2rem 0;
    background-color: $sidebar-color-background;
    color: $sidebar-color;
    a {
      color: #505050; // TODO: Replace with variable
    }
      /* Sidebar nav */
      .nav-sidebar {
        padding-left: 0;
        list-style: none;
        text-align: center;
        width: 100%;
      }
      .nav-sidebar-item a{
        width: 100%;
        text-align: center;
        display: block;
        padding-top: .5em;
        padding-bottom: .5em;
      }
      .nav-sidebar-item a:hover,
      .nav-sidebar-item a:focus {
        text-decoration: none;
        color: lighten($sidebar-color, 5%);
        background-color: darken($sidebar-color-background, 25%);
      }
      .nav-sidebar-item.active a {
        color: darken($sidebar-color, 33%);
      }
    hr {
       margin:1em auto;
      border-top: 1px solid darken($sidebar-color-background, 34%);

    }
    @include media($sidebar-left-breakpoint) {
      width: $sidebar-width; // larger screens show the sidebar at this width
      height: 100%;
      position: fixed;
      top: 0;
      left: 0;
      overflow: visible;
      -webkit-overflow-scrolling: touch;
    }
  }
}

@else { // ELSE, if not showing the left sidebar, hide it in case it's called in templates
  .sidebar-left {
      display:none;

  }
}


// =============== RIGHT SIDEBAR ===============

@if $include-sidebar-right != false {

  //.content
  .content, .splash
   {
    margin-right: 0;
    @include media($sidebar-right-breakpoint) {
        margin-right:  $sidebar-right-width;

        // the following two classes allow us to change the width of the sidebar from front matter by adding sidebar_width: narrow or sidebar_width: medium

    }
  }

  @include media($sidebar-right-breakpoint) {

body.narrow .content{
          margin-right:  $sidebar-right-width-narrow;
      }
        body.medium .content{
          margin-right:  $sidebar-right-width-medium;
        
      }
}



  .sidebar-right {

  // BASIC STYLING (FOR SMALLEST SCREENS - ADJUST BELOW)
      margin-top:0;
      clear: both;
      overflow: hidden;
      z-index: 1000;
      //margin-top: $navigation-height;
      width: 100%;
      height: auto;
      position: static;
      text-align: left;
      padding: 2em 7em 4em 2em;

      //THESE ITEMS WILL BE PULLED OUT INTO PAGES
      color: $sidebar-right-color;
      background-color: $sidebar-right-color-background;
      // background-image: url(/assets/img/Astfeld-023-large_041621.jpg);
      // background-position: top 20%; // Background position needs to be at top for desktop?
      // background-repeat: no-repeat;
 
      transition: background 1.25s ease-in-out;
     -moz-transition: background 1.25s ease-in-out;
     -webkit-transition: background 1.25s ease-in-out;
      //END

  // SET TEXT COLORS
      h1 {
        color: $light-gray;
      }
      a { 
        color: $sidebar-right-color;
      }
  //SET THE PARAGRAPH SIZES TO ADJUST TO VARIOUS SCREENS
      p { 
        font-size: 1.2em;
          @include media($normal-screen-up) {
            font-size: 1.6em;
          }
          @include media($wide-screen-up) {
            font-size: 1.9em;
          }
        }
        hr {
       margin:1em auto;
      border-top: 1px solid darken($sidebar-right-color-background, 1%);

    }
    


   // ADJUST PADDING AND POSITIONING FOR VARIOUS SCREENS  
   

      @include media($sidebar-right-breakpoint) {
        /* this is sidebar-right-breakpoint */

        background-position: top 20%; // Background position needs to be at top for desktop?

        //margin-top: $navigation-height;
        padding: 3rem 4rem;
        padding-top: $navigation-height + 40px;
        width: $sidebar-right-width;
        height: 100%;
        position: fixed;
        top: 0;
        right: 0;
        overflow-y: scroll; // TODO: style the scroll? check on browser pics
        -webkit-overflow-scrolling: touch;
          section:first-child {
            margin-top: 37% !important;
          }
          section:last-child {
            margin-bottom: 10% !important;
        }
      
      }

    @if $include-sidebar-left != false {
      @include media($sidebar-left-breakpoint, $sidebar-right-breakpoint) {
          /* this is sidebar-left-breakpoint sidebar-right-breakpoint */
            margin-left: $sidebar-width;
            width: 100% - $sidebar-width;
        }
      }








  

    }
  }
// IF WE'RE CALLING THE FILE BUT NOT USING RIGHT SIDEBAR MAKE SURE IT DOESN'T MESS UP FRONT-END
  @else {
    .sidebar-right {
        display:none;
    }
}


@include media($sidebar-right-breakpoint) {

// the following two classes allow us to change the width of the sidebar from front matter by adding sidebar_width: narrow or sidebar_width: medium
        body.narrow  .sidebar-right{
          width:  $sidebar-right-width-narrow;
        }
        body.medium .sidebar-right{
          width:  $sidebar-right-width-medium;
        }
      }
